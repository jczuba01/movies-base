<div class="container mt-4">
  <h1>Movies</h1>

  <%= link_to "New Movie", new_movie_path, class: "btn btn-primary mb-3" %>

    <div class="card mb-3">
    <div class="card-body">
      <%= search_form_for @q do |f| %>
        <div class="row">
          <div class="col-md-8">
            <%= f.label :title_cont, "Title contains", class: "form-label" %>
            <%= f.search_field :title_cont, class: "form-control" %>
          </div>
          <div class="col-md-4 d-flex align-items-end">
            <%= f.submit "Search", class: "btn btn-primary me-2" %>
            <%= link_to "Reset", movies_path, class: "btn btn-secondary" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th><%= sort_link(@q, :title, "Title") %></th>
        <th>Description</th>
        <th>Genre</th>
        <th>Duration in Minutes</th>
        <th>Director</th>
        <th>Origin Country</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @movies.each do |movie| %>
        <tr>
          <td><%= movie.id %></td>
          <td><%= link_to movie.title, movie %></td>
          <td><%= movie.description %></td>
          <td><%= link_to movie.genre.name, movie.genre %></td> <!-- Assuming Genre relation -->
          <td><%= movie.duration_minutes %></td>
          <td><%= link_to "#{movie.director.first_name} #{movie.director.last_name}", movie.director %></td> <!-- Assuming Director relation -->
          <td><%= movie.origin_country %></td>
          <td>
            <%= link_to "Edit", edit_movie_path(movie), class: "btn btn-warning btn-sm" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>